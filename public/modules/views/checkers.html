<div class="checker-layout"><div ng-repeat="checker in checkers track by $index" ng-class="{blue : checker.color === 'blue', red : checker.color === 'red', green : checker.color === 'green', coffee : checker.color === 'coffee', purple : checker.color === 'purple', pink : checker.color === 'pink' }" class="checker"><div class="checker-content"><div class="checker-head"><div class="pure-g"><div class="pure-u-5-6"><div ng-click="checkerFunc.clickToOpen(checker)">{{checker.name}}</div></div><div class="pure-u-1-6"><a ng-click="checkerFunc.delete(checker, $index)" class="delete-button">x</a></div></div></div><div class="task-list"><div ng-repeat="task in checker.tasks track by $index" class="task"><div class="pure-g"><div class="pure-u-5-6"><div class="pure-g"><div class="pure-u-1-6"><input id="{{task._id}}" type="checkbox" ng-model="task.finished" ng-click="taskFunc.updateFinished(checker, task)" ng-disabled="task.owner._id !== user._id"/><label for="{{task._id}}"></label><img src="../img/core/alarm.png" ng-if="task.due_date" class="small-icon-button"/></div><div class="pure-u-5-6"><div ng-class="{finished: task.finished}" ng-click="taskFunc.clickToOpen(task)">{{task.name}}</div><div ng-class="{blink: !task.finished &amp;&amp; blink_animation}" ng-if="$index!==checker.tasks.length-1" class="task-arrow"></div></div></div></div><div class="pure-u-1-6"><a ng-click="task.owner._id !== user._id || taskFunc.delete(checker, task, $index)" class="task-delete-button">x</a><div class="dropdown"><img ng-src="{{task.owner.profile_photo||'../img/core/user-black.png'}}" class="drop-button"/><div class="dropdown-content"><a ng-click="taskFunc.setTaskOwner(task, user)" ng-repeat="user in users track by $index"><img ng-src="{{user.profile_photo}}" class="icon-button"/><span>{{user.name}}</span></a></div></div></div></div></div><div ng-hide="!taskFunc.content_input_display[checker._id]" class="task"><div class="pure-g"><div class="pure-u-5-6"><textarea type="text" ng-model="taskFunc.content_input[checker._id]"></textarea></div><div class="pure-u-1-6"><a ng-click="taskFunc.cancel(checker._id)" class="cancel-button">x</a><a ng-click="taskFunc.save(checker)" class="save-button">儲存</a></div></div></div></div><a ng-click="taskFunc.add(checker._id)" ng-hide="taskFunc.content_input_display[checker._id]"><div class="add-task-button">新增任務</div></a></div></div><div ng-hide="!checkerFunc.content_input_display" class="checker"><div class="checker-content"><div class="pure-g"><div class="pure-u-5-6"><input type="text" ng-model="checkerFunc.content_input"/></div><div class="pure-u-1-6"><a ng-click="checkerFunc.cancel(checker._id)" class="cancel-button">x</a></div></div><a ng-click="checkerFunc.save()" class="save-button">儲存</a></div></div><a ng-click="checkerFunc.add()" ng-hide="checkerFunc.content_input_display"><div class="add-checker-button">新增專案</div></a></div><script type="text/ng-template" id="task-template"><div class="pure-g"><div class="pure-u-1-2"><input ng-model="task.name" ng-blur="update(task)"/></div><div class="pure-u-1-2"><span ng-class="{overtime: (task.due_date &lt; now)&amp;&amp;task.due_date}" ng-hide="duedate_input_display[task._id]||task.finished" class="due-date">{{task.due_date.toLocaleDateString()}} {{task.due_date.toLocaleTimeString([],{hour: '2-digit', minute:'2-digit'})}}</span></div></div><img src="../img/core/alarm.png" ng-click="switchDateSet(task._id)" ng-hide="duedate_input_display[task._id]||!task.owner" ng-if="task.owner._id === user._id" class="icon-button"/><div ng-hide="!duedate_input_display[task._id]" class="date-set-block"><input type="datetime-local" ng-model="task.due_date"/><div class="pure-g"><div class="pure-u-1-2"><select ng-model="task.remind"><option value="on_duedate">當天提醒</option><option value="one_week">提前一週提醒</option></select></div><div class="pure-u-1-4"><a ng-click="setDueDate(task)" class="save-button">儲存</a></div><div class="pure-u-1-4"><a ng-click="switchDateSet(task._id)" class="save-button">關閉</a></div></div></div><div class="message-enter"><div class="pure-g"><div class="pure-u-1-2"><textarea ng-model="enter_message"></textarea></div><div class="pure-u-1-2"><a ng-click="enterMessage()">輸入</a></div></div></div><div ng-repeat="message in task.messages track by $index" class="message"> <div class="pure-g"><div class="pure-u-19-24"><span ng-hide="message_input_display[message._id]" ng-click="modify(message._id)">{{message.name}}</span><textarea ng-model="message.name" ng-hide="!message_input_display[message._id]" ng-blur="updateMessage(message)"></textarea></div><div class="pure-u-1-6"></div><div class="pure-u-1-24"><a ng-click="delete(task, message, $index)" class="cancel-button">x</a></div></div></div></script><script type="text/ng-template" id="checker-template"><input type="text" ng-model="checker.name" ng-blur="update(checker)"/><div class="pure-g choose-color"><div class="pure-u-1-6"><div ng-click="updateColor(checker, 'blue')" class="choose-blue"></div></div><div class="pure-u-1-6"><div ng-click="updateColor(checker, 'red')" class="choose-red"></div></div><div class="pure-u-1-6"><div ng-click="updateColor(checker, 'green')" class="choose-green"> </div></div><div class="pure-u-1-6"><div ng-click="updateColor(checker, 'coffee')" class="choose-coffee"> </div></div><div class="pure-u-1-6"><div ng-click="updateColor(checker, 'purple')" class="choose-purple"></div></div><div class="pure-u-1-6"><div ng-click="updateColor(checker, 'pink')" class="choose-pink"></div></div></div></script>