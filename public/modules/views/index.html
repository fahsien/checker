<!DOCTYPE html><html lang="en" ng-app="index"></html><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content=""><meta name="author" content=""><title>Checkers</title><!-- Core CSS --><link href="../modules/css/core.css" rel="stylesheet"><!-- Pure --><link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.6.0/pure-min.css"><!-- Angularjs --><script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.8/angular.min.js"></script><script src="../js/index.js"></script><link rel="stylesheet" href="/bower_components/ng-dialog/css/ngDialog.min.css"><link rel="stylesheet" href="/bower_components/ng-dialog/css/ngDialog-theme-default.min.css"><script src="/bower_components/ng-dialog/js/ngDialog.min.js"></script></head><body ng-controller="indexController"><div class="checker-layout"><div class="header"><div ng-click="logout()" class="logout-button">登出</div></div><div ng-repeat="checker in checkers track by $index" ng-class="{blue : checker.color === 'blue', red : checker.color === 'red', green : checker.color === 'green' }" class="checker"><div class="checker-content"><div class="checker-head"><div class="pure-g"><div class="pure-u-5-6"><div ng-click="checkerFunc.clickToOpen(checker)">{{checker.name}}</div></div><div class="pure-u-1-6"><a ng-click="checkerFunc.delete(checker, $index)" class="delete-button">x</a></div></div></div><div class="task-list"><div ng-repeat="task in checker.tasks track by $index" class="task"><div class="pure-g"><div class="pure-u-5-6"><div class="pure-g"><div class="pure-u-1-6"><input id="{{task._id}}" type="checkbox" ng-model="task.finished" ng-click="taskFunc.updateFinished(checker, task)" ng-disabled="task.owner._id !== user._id"><label for="{{task._id}}"></label><img src="../img/core/alarm.png" ng-click="taskFunc.switchDateSet(task._id)" ng-hide="taskFunc.duedate_input_display[task._id]||!task.owner" ng-if="task.owner._id === user._id" class="icon-button"></div><div class="pure-u-5-6"><div ng-class="{finished: task.finished}" ng-click="taskFunc.clickToOpen(task)">{{task.name}}</div><span ng-class="{overtime: (task.due_date &lt; now)&amp;&amp;task.due_date}" ng-hide="taskFunc.duedate_input_display[task._id]||task.finished" class="due-date">{{task.due_date.toLocaleDateString()}} {{task.due_date.toLocaleTimeString([],{hour: '2-digit', minute:'2-digit'})}}</span></div></div></div><div class="pure-u-1-6"><a ng-click="task.owner._id !== user._id || taskFunc.delete(checker, task, $index)" class="task-delete-button">x</a><div class="dropdown"><img ng-src="{{task.owner.profile_photo||'../img/core/user-black.png'}}" class="drop-button"><div class="dropdown-content"><a ng-click="taskFunc.setTaskOwner(task, user)" ng-repeat="user in users track by $index"><img ng-src="{{user.profile_photo}}" class="icon-button"><span>{{user.name}}</span></a></div></div></div></div><div ng-hide="!taskFunc.duedate_input_display[task._id]" class="date-set-block"><input type="datetime-local" ng-model="task.due_date"><div class="pure-g"><div class="pure-u-1-2"><select ng-model="task.remind"><option value="on_duedate">當天提醒</option><option value="one_week">提前一週提醒</option></select></div><div class="pure-u-1-4"><a ng-click="taskFunc.setDueDate(task)" class="save-button">儲存</a></div><div class="pure-u-1-4"><a ng-click="taskFunc.switchDateSet(task._id)" class="save-button">關閉</a></div></div></div><div ng-class="{blink: !task.finished &amp;&amp; blink_animation}" ng-if="$index!==checker.tasks.length-1" class="task-arrow"></div></div><div ng-hide="!taskFunc.content_input_display[checker._id]" class="task"><div class="pure-g"><div class="pure-u-5-6"><textarea type="text" ng-model="taskFunc.content_input[checker._id]"></textarea></div><div class="pure-u-1-6"><a ng-click="taskFunc.cancel(checker._id)" class="cancel-button">x</a><a ng-click="taskFunc.save(checker)" class="save-button">儲存</a></div></div></div></div><a ng-click="taskFunc.add(checker._id)" ng-hide="taskFunc.content_input_display[checker._id]"><div class="add-task-button">新增任務</div></a></div></div><div ng-hide="!checkerFunc.content_input_display" class="checker"><div class="checker-content"><div class="pure-g"><div class="pure-u-5-6"><input type="text" ng-model="checkerFunc.content_input"></div><div class="pure-u-1-6"><a ng-click="checkerFunc.cancel(checker._id)" class="cancel-button">x</a></div></div><a ng-click="checkerFunc.save()" class="save-button">儲存</a></div></div><a ng-click="checkerFunc.add()" ng-hide="checkerFunc.content_input_display"><div class="add-checker-button">新增專案</div></a></div></body><script type="text/ng-template" id="task-template"><input ng-model="task.name" ng-blur="update(task)"><textarea ng-model="task.describe" ng-blur="update(task)"></textarea></script><script type="text/ng-template" id="checker-template"><input type="text" ng-model="checker.name" ng-blur="update(checker)"><div class="pure-g choose-color"><div class="pure-u-1-3"><div ng-click="updateColor(checker, 'blue')" class="choose-blue"></div></div><div class="pure-u-1-3"><div ng-click="updateColor(checker, 'red')" class="choose-red"></div></div><div class="pure-u-1-3"><div ng-click="updateColor(checker, 'green')" class="choose-green"> </div></div></div></script>